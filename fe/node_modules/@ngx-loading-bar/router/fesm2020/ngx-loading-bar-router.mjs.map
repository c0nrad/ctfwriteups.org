{"version":3,"file":"ngx-loading-bar-router.mjs","sources":["../../../../packages/router/src/router.module.ts","../../../../packages/router/src/ngx-loading-bar-router.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport {\n  RouterModule,\n  Router,\n  NavigationStart,\n  NavigationError,\n  NavigationEnd,\n  NavigationCancel,\n} from '@angular/router';\nimport { LoadingBarModule, LoadingBarService } from '@ngx-loading-bar/core';\n\n@NgModule({\n  imports: [RouterModule, LoadingBarModule],\n  exports: [RouterModule, LoadingBarModule],\n})\nexport class LoadingBarRouterModule {\n  constructor(router: Router, loader: LoadingBarService) {\n    const ref = loader.useRef('router');\n    router.events.subscribe((event) => {\n      const navState = this.getCurrentNavigationState(router);\n      if (navState && navState.ignoreLoadingBar) {\n        return;\n      }\n\n      if (event instanceof NavigationStart) {\n        ref.start();\n      }\n\n      if (event instanceof NavigationError || event instanceof NavigationEnd || event instanceof NavigationCancel) {\n        ref.complete();\n      }\n    });\n  }\n\n  private getCurrentNavigationState(router: any) {\n    // `getCurrentNavigation` only available in angular `7.2`\n    const currentNavigation = router.getCurrentNavigation && router.getCurrentNavigation();\n    if (currentNavigation && currentNavigation.extras) {\n      return currentNavigation.extras.state;\n    }\n\n    return {};\n  }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":";;;;;;;MAea,sBAAsB;IACjC,YAAY,MAAc,EAAE,MAAyB;QACnD,MAAM,GAAG,GAAG,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;QACpC,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,KAAK;YAC5B,MAAM,QAAQ,GAAG,IAAI,CAAC,yBAAyB,CAAC,MAAM,CAAC,CAAC;YACxD,IAAI,QAAQ,IAAI,QAAQ,CAAC,gBAAgB,EAAE;gBACzC,OAAO;aACR;YAED,IAAI,KAAK,YAAY,eAAe,EAAE;gBACpC,GAAG,CAAC,KAAK,EAAE,CAAC;aACb;YAED,IAAI,KAAK,YAAY,eAAe,IAAI,KAAK,YAAY,aAAa,IAAI,KAAK,YAAY,gBAAgB,EAAE;gBAC3G,GAAG,CAAC,QAAQ,EAAE,CAAC;aAChB;SACF,CAAC,CAAC;KACJ;IAEO,yBAAyB,CAAC,MAAW;;QAE3C,MAAM,iBAAiB,GAAG,MAAM,CAAC,oBAAoB,IAAI,MAAM,CAAC,oBAAoB,EAAE,CAAC;QACvF,IAAI,iBAAiB,IAAI,iBAAiB,CAAC,MAAM,EAAE;YACjD,OAAO,iBAAiB,CAAC,MAAM,CAAC,KAAK,CAAC;SACvC;QAED,OAAO,EAAE,CAAC;KACX;;mHA3BU,sBAAsB;oHAAtB,sBAAsB,YAHvB,YAAY,EAAE,gBAAgB,aAC9B,YAAY,EAAE,gBAAgB;oHAE7B,sBAAsB,YAHxB,CAAC,YAAY,EAAE,gBAAgB,CAAC,EAC/B,YAAY,EAAE,gBAAgB;2FAE7B,sBAAsB;kBAJlC,QAAQ;mBAAC;oBACR,OAAO,EAAE,CAAC,YAAY,EAAE,gBAAgB,CAAC;oBACzC,OAAO,EAAE,CAAC,YAAY,EAAE,gBAAgB,CAAC;iBAC1C;;;ACdD;;;;;;"}
{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/ctf.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"src/app/services/user.service\";\nimport * as i5 from \"src/app/services/writeup.service\";\nimport * as i6 from \"src/app/services/vote.service\";\nimport * as i7 from \"src/app/services/challenge.service\";\nimport * as i8 from \"@angular/forms\";\nfunction CtfEditComponent_div_1_button_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function CtfEditComponent_div_1_button_13_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.save());\n    });\n    i0.ɵɵtext(1, \"Save\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CtfEditComponent_div_1_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h2\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r4.ctf.name);\n  }\n}\nfunction CtfEditComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"label\", 5);\n    i0.ɵɵtext(2, \"CTF Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 6)(4, \"input\", 7);\n    i0.ɵɵlistener(\"ngModelChange\", function CtfEditComponent_div_1_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.ctf.name = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\")(6, \"label\", 5);\n    i0.ɵɵtext(7, \"CTF URL\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"input\", 8);\n    i0.ɵɵlistener(\"ngModelChange\", function CtfEditComponent_div_1_Template_input_ngModelChange_8_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.ctf.url = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\")(10, \"label\");\n    i0.ɵɵtext(11, \"CTF End (Unix Time, example: 1704639600)\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"input\", 9);\n    i0.ɵɵlistener(\"ngModelChange\", function CtfEditComponent_div_1_Template_input_ngModelChange_12_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.ctf.endDate = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(13, CtfEditComponent_div_1_button_13_Template, 2, 0, \"button\", 10);\n    i0.ɵɵtemplate(14, CtfEditComponent_div_1_div_14_Template, 3, 1, \"div\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.ctf.name);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.ctf.url);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.ctf.endDate);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.me.isAdmin);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.me.isAdmin);\n  }\n}\nfunction CtfEditComponent_div_2_tr_15_p_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const challenge_r14 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(challenge_r14.name);\n  }\n}\nfunction CtfEditComponent_div_2_tr_15_input_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r31 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"input\", 25);\n    i0.ɵɵlistener(\"ngModelChange\", function CtfEditComponent_div_2_tr_15_input_3_Template_input_ngModelChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r31);\n      const challenge_r14 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(challenge_r14.name = $event);\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const challenge_r14 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"ngModel\", challenge_r14.name);\n  }\n}\nfunction CtfEditComponent_div_2_tr_15_button_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r35 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function CtfEditComponent_div_2_tr_15_button_4_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r35);\n      const challenge_r14 = i0.ɵɵnextContext().$implicit;\n      const ctx_r33 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r33.deleteChallenge(challenge_r14));\n    });\n    i0.ɵɵtext(1, \"Delete\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CtfEditComponent_div_2_tr_15_button_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r38 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function CtfEditComponent_div_2_tr_15_button_5_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r38);\n      const challenge_r14 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(challenge_r14.isEditMode = true);\n    });\n    i0.ɵɵtext(1, \"Edit\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CtfEditComponent_div_2_tr_15_button_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r41 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function CtfEditComponent_div_2_tr_15_button_6_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r41);\n      const challenge_r14 = i0.ɵɵnextContext().$implicit;\n      const ctx_r39 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r39.updateChallenge(challenge_r14));\n    });\n    i0.ɵɵtext(1, \"Save\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CtfEditComponent_div_2_tr_15_p_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const challenge_r14 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(challenge_r14.solves);\n  }\n}\nfunction CtfEditComponent_div_2_tr_15_input_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r45 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"input\", 28);\n    i0.ɵɵlistener(\"ngModelChange\", function CtfEditComponent_div_2_tr_15_input_9_Template_input_ngModelChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r45);\n      const challenge_r14 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(challenge_r14.solves = $event);\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const challenge_r14 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"ngModel\", challenge_r14.solves);\n  }\n}\nfunction CtfEditComponent_div_2_tr_15_p_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const challenge_r14 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(challenge_r14.shortDescription);\n  }\n}\nfunction CtfEditComponent_div_2_tr_15_input_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r50 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"input\", 29);\n    i0.ɵɵlistener(\"ngModelChange\", function CtfEditComponent_div_2_tr_15_input_12_Template_input_ngModelChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r50);\n      const challenge_r14 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(challenge_r14.shortDescription = $event);\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const challenge_r14 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"ngModel\", challenge_r14.shortDescription);\n  }\n}\nfunction CtfEditComponent_div_2_tr_15_span_14_button_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r56 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 32);\n    i0.ɵɵlistener(\"click\", function CtfEditComponent_div_2_tr_15_span_14_button_2_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r56);\n      const tag_r52 = i0.ɵɵnextContext().$implicit;\n      const challenge_r14 = i0.ɵɵnextContext().$implicit;\n      const ctx_r54 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r54.removeTag(challenge_r14, tag_r52));\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CtfEditComponent_div_2_tr_15_span_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 30);\n    i0.ɵɵtext(1);\n    i0.ɵɵtemplate(2, CtfEditComponent_div_2_tr_15_span_14_button_2_Template, 1, 0, \"button\", 31);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const tag_r52 = ctx.$implicit;\n    const challenge_r14 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", tag_r52, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", challenge_r14.isEditMode);\n  }\n}\nfunction CtfEditComponent_div_2_tr_15_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r60 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 33)(1, \"input\", 34);\n    i0.ɵɵlistener(\"ngModelChange\", function CtfEditComponent_div_2_tr_15_div_15_Template_input_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r60);\n      const ctx_r59 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r59.newTag = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"button\", 35);\n    i0.ɵɵlistener(\"click\", function CtfEditComponent_div_2_tr_15_div_15_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r60);\n      const challenge_r14 = i0.ɵɵnextContext().$implicit;\n      const ctx_r61 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r61.addTag(challenge_r14, ctx_r61.newTag));\n    });\n    i0.ɵɵtext(3, \"Add Tag\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r25 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r25.newTag);\n  }\n}\nfunction CtfEditComponent_div_2_tr_15_li_18_i_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r69 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"i\", 39);\n    i0.ɵɵlistener(\"click\", function CtfEditComponent_div_2_tr_15_li_18_i_1_Template_i_click_0_listener() {\n      i0.ɵɵrestoreView(_r69);\n      const writeup_r63 = i0.ɵɵnextContext().$implicit;\n      const ctx_r67 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r67.addVote(writeup_r63));\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CtfEditComponent_div_2_tr_15_li_18_i_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r72 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"i\", 40);\n    i0.ɵɵlistener(\"click\", function CtfEditComponent_div_2_tr_15_li_18_i_2_Template_i_click_0_listener() {\n      i0.ɵɵrestoreView(_r72);\n      const writeup_r63 = i0.ɵɵnextContext().$implicit;\n      const ctx_r70 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r70.removeVote(ctx_r70.getVote(writeup_r63), writeup_r63));\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CtfEditComponent_div_2_tr_15_li_18_button_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r75 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function CtfEditComponent_div_2_tr_15_li_18_button_6_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r75);\n      const writeup_r63 = i0.ɵɵnextContext().$implicit;\n      const ctx_r73 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r73.deleteWriteup(writeup_r63));\n    });\n    i0.ɵɵtext(1, \"Delete\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CtfEditComponent_div_2_tr_15_li_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtemplate(1, CtfEditComponent_div_2_tr_15_li_18_i_1_Template, 1, 0, \"i\", 36);\n    i0.ɵɵtemplate(2, CtfEditComponent_div_2_tr_15_li_18_i_2_Template, 1, 0, \"i\", 37);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementStart(4, \"a\", 38);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, CtfEditComponent_div_2_tr_15_li_18_button_6_Template, 2, 0, \"button\", 19);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const writeup_r63 = ctx.$implicit;\n    const ctx_r26 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r26.hasVoted(writeup_r63));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r26.hasVoted(writeup_r63));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", writeup_r63.voteCount, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"href\", writeup_r63.url, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(writeup_r63.url);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r26.me.isAdmin || writeup_r63.submitterID == ctx_r26.me.id);\n  }\n}\nfunction CtfEditComponent_div_2_tr_15_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r78 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"input\", 41);\n    i0.ɵɵlistener(\"keyup.enter\", function CtfEditComponent_div_2_tr_15_div_19_Template_input_keyup_enter_1_listener() {\n      i0.ɵɵrestoreView(_r78);\n      const challenge_r14 = i0.ɵɵnextContext().$implicit;\n      const ctx_r76 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r76.saveWriteup(challenge_r14, ctx_r76.newChallengeWriteupURL[challenge_r14.id]));\n    })(\"ngModelChange\", function CtfEditComponent_div_2_tr_15_div_19_Template_input_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r78);\n      const challenge_r14 = i0.ɵɵnextContext().$implicit;\n      const ctx_r79 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r79.newChallengeWriteupURL[challenge_r14.id] = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"button\", 42);\n    i0.ɵɵlistener(\"click\", function CtfEditComponent_div_2_tr_15_div_19_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r78);\n      const challenge_r14 = i0.ɵɵnextContext().$implicit;\n      const ctx_r81 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r81.saveWriteup(challenge_r14, ctx_r81.newChallengeWriteupURL[challenge_r14.id]));\n    });\n    i0.ɵɵtext(3, \"Add Writeup\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const challenge_r14 = i0.ɵɵnextContext().$implicit;\n    const ctx_r27 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r27.newChallengeWriteupURL[challenge_r14.id]);\n  }\n}\nfunction CtfEditComponent_div_2_tr_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtemplate(2, CtfEditComponent_div_2_tr_15_p_2_Template, 2, 1, \"p\", 11);\n    i0.ɵɵtemplate(3, CtfEditComponent_div_2_tr_15_input_3_Template, 1, 1, \"input\", 18);\n    i0.ɵɵtemplate(4, CtfEditComponent_div_2_tr_15_button_4_Template, 2, 0, \"button\", 19);\n    i0.ɵɵtemplate(5, CtfEditComponent_div_2_tr_15_button_5_Template, 2, 0, \"button\", 20);\n    i0.ɵɵtemplate(6, CtfEditComponent_div_2_tr_15_button_6_Template, 2, 0, \"button\", 20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtemplate(8, CtfEditComponent_div_2_tr_15_p_8_Template, 2, 1, \"p\", 11);\n    i0.ɵɵtemplate(9, CtfEditComponent_div_2_tr_15_input_9_Template, 1, 1, \"input\", 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\");\n    i0.ɵɵtemplate(11, CtfEditComponent_div_2_tr_15_p_11_Template, 2, 1, \"p\", 11);\n    i0.ɵɵtemplate(12, CtfEditComponent_div_2_tr_15_input_12_Template, 1, 1, \"input\", 22);\n    i0.ɵɵelementStart(13, \"div\");\n    i0.ɵɵtemplate(14, CtfEditComponent_div_2_tr_15_span_14_Template, 3, 2, \"span\", 23);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(15, CtfEditComponent_div_2_tr_15_div_15_Template, 4, 1, \"div\", 3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"td\")(17, \"ul\");\n    i0.ɵɵtemplate(18, CtfEditComponent_div_2_tr_15_li_18_Template, 7, 6, \"li\", 2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(19, CtfEditComponent_div_2_tr_15_div_19_Template, 4, 1, \"div\", 24);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const challenge_r14 = ctx.$implicit;\n    const ctx_r12 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !challenge_r14.isEditMode);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", challenge_r14.isEditMode);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r12.me.isAdmin);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !challenge_r14.isEditMode && !!ctx_r12.me.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", challenge_r14.isEditMode);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !challenge_r14.isEditMode);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", challenge_r14.isEditMode);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !challenge_r14.isEditMode);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", challenge_r14.isEditMode);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", challenge_r14.tags);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", challenge_r14.isEditMode);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r12.filterWriteups(challenge_r14.id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !!ctx_r12.me.id);\n  }\n}\nfunction CtfEditComponent_div_2_tr_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r86 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\")(2, \"input\", 43);\n    i0.ɵɵlistener(\"keyup.enter\", function CtfEditComponent_div_2_tr_16_Template_input_keyup_enter_2_listener() {\n      i0.ɵɵrestoreView(_r86);\n      const category_r11 = i0.ɵɵnextContext().$implicit;\n      const ctx_r84 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r84.saveChallenge(category_r11));\n    })(\"ngModelChange\", function CtfEditComponent_div_2_tr_16_Template_input_ngModelChange_2_listener($event) {\n      i0.ɵɵrestoreView(_r86);\n      const category_r11 = i0.ɵɵnextContext().$implicit;\n      const ctx_r87 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r87.newCategoryChallenge[category_r11].name = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(3, \"td\")(4, \"input\", 28);\n    i0.ɵɵlistener(\"ngModelChange\", function CtfEditComponent_div_2_tr_16_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r86);\n      const category_r11 = i0.ɵɵnextContext().$implicit;\n      const ctx_r89 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r89.newCategoryChallenge[category_r11].solves = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"td\")(6, \"input\", 29);\n    i0.ɵɵlistener(\"ngModelChange\", function CtfEditComponent_div_2_tr_16_Template_input_ngModelChange_6_listener($event) {\n      i0.ɵɵrestoreView(_r86);\n      const category_r11 = i0.ɵɵnextContext().$implicit;\n      const ctx_r91 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r91.newCategoryChallenge[category_r11].shortDescription = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"td\")(8, \"button\", 44);\n    i0.ɵɵlistener(\"click\", function CtfEditComponent_div_2_tr_16_Template_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r86);\n      const category_r11 = i0.ɵɵnextContext().$implicit;\n      const ctx_r93 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r93.saveChallenge(category_r11));\n    });\n    i0.ɵɵtext(9, \"Save New Challenge\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const category_r11 = i0.ɵɵnextContext().$implicit;\n    const ctx_r13 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r13.newCategoryChallenge[category_r11].name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r13.newCategoryChallenge[category_r11].solves);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r13.newCategoryChallenge[category_r11].shortDescription);\n  }\n}\nfunction CtfEditComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h3\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"table\", 13)(4, \"thead\")(5, \"tr\")(6, \"th\", 14);\n    i0.ɵɵtext(7, \"Challenge Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\", 15);\n    i0.ɵɵtext(9, \"Solves\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\", 16);\n    i0.ɵɵtext(11, \"Short Solution Description / Tags\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\", 17);\n    i0.ɵɵtext(13, \"Writeups\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(14, \"tbody\");\n    i0.ɵɵtemplate(15, CtfEditComponent_div_2_tr_15_Template, 20, 13, \"tr\", 2);\n    i0.ɵɵtemplate(16, CtfEditComponent_div_2_tr_16_Template, 10, 3, \"tr\", 11);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const category_r11 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(category_r11);\n    i0.ɵɵadvance(13);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.filterChallenges(category_r11));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.me.isAdmin);\n  }\n}\nfunction CtfEditComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r97 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 33)(1, \"input\", 45);\n    i0.ɵɵlistener(\"ngModelChange\", function CtfEditComponent_div_3_Template_input_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r97);\n      const ctx_r96 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r96.newCategory = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"button\", 35);\n    i0.ɵɵlistener(\"click\", function CtfEditComponent_div_3_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r97);\n      const ctx_r98 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r98.addCategory(ctx_r98.newCategory));\n    });\n    i0.ɵɵtext(3, \"Add Category\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.newCategory);\n  }\n}\nexport class CtfEditComponent {\n  constructor(route, ctfService, location, userService, writeupService, voteService, challengeService) {\n    this.route = route;\n    this.ctfService = ctfService;\n    this.location = location;\n    this.userService = userService;\n    this.writeupService = writeupService;\n    this.voteService = voteService;\n    this.challengeService = challengeService;\n    this.ctfID = \"\";\n    this.ctf = {};\n    this.me = {};\n    this.newCategory = \"\";\n    this.newCategoryChallenge = {};\n    this.newChallengeWriteupURL = {};\n    this.newTag = \"\";\n    this.challenges = [];\n    this.writeups = [];\n    this.votes = [];\n  }\n  ngOnInit() {\n    this.userService.getMe().subscribe(me => {\n      this.me = me;\n    });\n    this.voteService.getVotes().subscribe(votes => {\n      this.votes = votes || [];\n    });\n    this.route.params.subscribe(params => {\n      if (params[\"id\"]) {\n        this.ctfID = params[\"id\"];\n        if (this.ctfID == \"new\") {\n          this.ctf = {};\n          this.ctf.submitterID = this.me.id;\n          this.ctf.categories = [];\n          this.ctf.endDate = Date.now();\n          return;\n        }\n        this.ctfService.getCTF(params[\"id\"]).subscribe(ctf => {\n          this.ctf = ctf;\n          for (let category of this.ctf.categories) {\n            this.newCategoryChallenge[category] = {\n              ctfID: this.ctf.id,\n              category: category\n            };\n          }\n        });\n        this.challengeService.getChallenges(params[\"id\"]).subscribe(challenges => {\n          if (!challenges) {\n            this.challenges = [];\n            return;\n          }\n          this.challenges = challenges;\n          this.newChallengeWriteupURL = {};\n          for (let challenge of this.challenges) {\n            this.newChallengeWriteupURL[challenge.id] = \"\";\n          }\n        });\n        this.writeupService.getWriteupsForCTF(params[\"id\"]).subscribe(writeups => {\n          this.writeups = writeups || [];\n        });\n      } else {\n        this.ctf.submitterID = this.me.id;\n      }\n    });\n  }\n  newCTF() {\n    this.location.go(\"/ctfs/new\");\n  }\n  save() {\n    if (this.ctf.id) {\n      this.ctfService.updateCTF(this.ctf).subscribe(() => {\n        this.location.go(`/ctfs/${this.ctf.id}/edit`);\n      });\n    } else {\n      this.ctfService.newCTF(this.ctf).subscribe(ctf => {\n        this.ctf = ctf;\n        this.location.go(`/ctfs/${this.ctf.id}/edit`);\n      });\n    }\n  }\n  removeCategory(category) {\n    if (!this.ctf.categories) {\n      this.ctf.categories = [];\n    }\n    this.ctf.categories = this.ctf.categories.filter(t => t !== category);\n  }\n  addCategory(category) {\n    if (!this.ctf.categories) {\n      this.ctf.categories = [];\n    }\n    this.ctf.categories.push(category);\n    this.newCategory = \"\";\n    this.newCategoryChallenge[category] = {\n      ctfID: this.ctf.id,\n      category: category\n    };\n    this.save();\n  }\n  saveChallenge(category) {\n    this.challengeService.newChallenge(this.newCategoryChallenge[category]).subscribe(challenge => {\n      this.challenges.push(challenge);\n      this.newCategoryChallenge[category] = {\n        ctfID: this.ctf.id,\n        category: category\n      };\n    });\n  }\n  updateChallenge(challenge) {\n    this.challengeService.updateChallenge(challenge).subscribe(() => {\n      challenge.isEditMode = false;\n    });\n  }\n  deleteChallenge(challenge) {\n    this.challengeService.deleteChallenge(challenge).subscribe(() => {\n      this.challenges = this.challenges.filter(c => c.id !== challenge.id);\n    });\n  }\n  deleteWriteup(writeup) {\n    this.writeupService.deleteWriteup(writeup).subscribe(() => {\n      this.writeups = this.writeups.filter(w => w.id !== writeup.id);\n    });\n  }\n  filterChallenges(category) {\n    if (this.challenges == null) {\n      return [];\n    }\n    return this.challenges.filter(challenge => challenge.category.toLowerCase() === category.toLowerCase()).sort((a, b) => b.solves - a.solves);\n  }\n  filterWriteups(challengeID) {\n    if (this.writeups == null) {\n      return [];\n    }\n    return this.writeups.filter(writeup => writeup.challengeID === challengeID).sort((a, b) => b.voteCount - a.voteCount);\n  }\n  saveWriteup(challenge, url) {\n    this.writeupService.newWriteup({\n      challengeID: challenge.id,\n      challengeName: challenge.name,\n      challengeCategory: challenge.category,\n      ctfName: this.ctf.name,\n      url: url,\n      ctfID: this.ctf.id,\n      submitterID: this.me.id\n    }).subscribe(writeup => {\n      this.writeups.push(writeup);\n      this.newChallengeWriteupURL[challenge.id] = \"\";\n    });\n  }\n  hasVoted(writeup) {\n    if (!this.votes) {}\n    return !!this.votes.find(v => v.writeupID === writeup.id);\n  }\n  getVote(writeup) {\n    return this.votes.find(v => v.writeupID === writeup.id);\n  }\n  addVote(writeup) {\n    const vote = {\n      writeupID: writeup.id,\n      userID: this.me.id\n    };\n    this.voteService.newVote(vote).subscribe(v => {\n      this.votes.push(v);\n      writeup.voteCount++;\n    });\n  }\n  removeVote(vote, writeup) {\n    console.log(\"remove vote\", vote);\n    this.voteService.deleteVote(vote).subscribe(_ => {\n      this.votes = this.votes.filter(v => vote.id !== v.id);\n      writeup.voteCount--;\n    });\n  }\n  removeTag(challenge, tag) {\n    challenge.tags = challenge.tags.filter(t => t !== tag);\n    this.challengeService.updateChallenge(challenge).subscribe(c => {\n      challenge = c;\n    });\n  }\n  addTag(challenge, tag) {\n    if (!challenge.tags) {\n      challenge.tags = [];\n    }\n    challenge.tags.push(tag);\n    this.newTag = \"\";\n    this.challengeService.updateChallenge(challenge).subscribe(c => {\n      challenge = c;\n    });\n  }\n  static #_ = this.ɵfac = function CtfEditComponent_Factory(t) {\n    return new (t || CtfEditComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.CTFService), i0.ɵɵdirectiveInject(i3.Location), i0.ɵɵdirectiveInject(i4.UserService), i0.ɵɵdirectiveInject(i5.WriteupService), i0.ɵɵdirectiveInject(i6.VoteService), i0.ɵɵdirectiveInject(i7.ChallengeService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CtfEditComponent,\n    selectors: [[\"app-ctf-edit\"]],\n    decls: 4,\n    vars: 3,\n    consts: [[1, \"container\", 2, \"padding-top\", \"65px\"], [\"class\", \"mb-3\", 4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"input-group mb-3\", 4, \"ngIf\"], [1, \"mb-3\"], [1, \"form-label\"], [1, \"input-group\"], [\"type\", \"text\", \"placeholder\", \"CTF Name\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"placeholder\", \"CTF URL\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"number\", \"placeholder\", \"CTF End Date\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"class\", \"btn btn-primary\", 3, \"click\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"table\", \"table-bordered\"], [\"scope\", \"row\", 1, \"col-2\"], [\"scope\", \"row\", 1, \"col-1\"], [\"scope\", \"row\", 1, \"col-3\"], [\"scope\", \"row\", 1, \"col-6\"], [\"type\", \"text\", \"class\", \"form-control\", \"placeholder\", \"Challenge Name\", 3, \"ngModel\", \"ngModelChange\", 4, \"ngIf\"], [\"class\", \"btn btn-danger btn-sm\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"btn btn-warning btn-sm\", 3, \"click\", 4, \"ngIf\"], [\"type\", \"number\", \"class\", \"form-control\", \"placeholder\", \"Solves\", 3, \"ngModel\", \"ngModelChange\", 4, \"ngIf\"], [\"type\", \"text\", \"class\", \"form-control\", \"placeholder\", \"Short Description\", 3, \"ngModel\", \"ngModelChange\", 4, \"ngIf\"], [\"class\", \"badge bg-secondary me-1\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"input-group\", 4, \"ngIf\"], [\"type\", \"text\", \"placeholder\", \"Challenge Name\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"btn\", \"btn-danger\", \"btn-sm\", 3, \"click\"], [1, \"btn\", \"btn-warning\", \"btn-sm\", 3, \"click\"], [\"type\", \"number\", \"placeholder\", \"Solves\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"placeholder\", \"Short Description\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"badge\", \"bg-secondary\", \"me-1\"], [\"class\", \"btn-close\", 3, \"click\", 4, \"ngIf\"], [1, \"btn-close\", 3, \"click\"], [1, \"input-group\", \"mb-3\"], [\"type\", \"text\", \"placeholder\", \"New Tag\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"btn\", \"btn-secondary\", 3, \"click\"], [\"class\", \"bi bi-heart\", \"style\", \"  vertical-align: 0em;\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"bi bi-heart-fill text-danger\", \"style\", \"\", 3, \"click\", 4, \"ngIf\"], [\"rel\", \"noopener noreferrer\", \"target\", \"_blank\", 3, \"href\"], [1, \"bi\", \"bi-heart\", 2, \"vertical-align\", \"0em\", 3, \"click\"], [1, \"bi\", \"bi-heart-fill\", \"text-danger\", 3, \"click\"], [\"type\", \"text\", \"placeholder\", \"Writeup URL\", 1, \"form-control\", 3, \"ngModel\", \"keyup.enter\", \"ngModelChange\"], [1, \"btn\", \"btn-secondary\", \"btn-sm\", 3, \"click\"], [\"type\", \"text\", \"placeholder\", \"Challenge Name\", 1, \"form-control\", 3, \"ngModel\", \"keyup.enter\", \"ngModelChange\"], [1, \"btn\", \"btn-primary\", \"btn-sm\", 3, \"click\"], [\"type\", \"text\", \"placeholder\", \"New Category\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"]],\n    template: function CtfEditComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, CtfEditComponent_div_1_Template, 15, 5, \"div\", 1);\n        i0.ɵɵtemplate(2, CtfEditComponent_div_2_Template, 17, 3, \"div\", 2);\n        i0.ɵɵtemplate(3, CtfEditComponent_div_3_Template, 4, 1, \"div\", 3);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.me.isAdmin);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.ctf.categories);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.me.isAdmin);\n      }\n    },\n    dependencies: [i3.NgForOf, i3.NgIf, i8.DefaultValueAccessor, i8.NumberValueAccessor, i8.NgControlStatus, i8.NgModel],\n    encapsulation: 2\n  });\n}","map":{"version":3,"mappings":"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","names":["i0","ctx_r70","CtfEditComponent","constructor","route","ctfService","location","userService","writeupService","voteService","challengeService","ngOnInit","getMe","subscribe","me","getVotes","votes","params","ctfID","ctf","submitterID","id","categories","endDate","Date","now","getCTF","category","newCategoryChallenge","getChallenges","challenges","newChallengeWriteupURL","challenge","getWriteupsForCTF","writeups","newCTF","go","save","updateCTF","removeCategory","filter","t","addCategory","push","newCategory","saveChallenge","newChallenge","updateChallenge","isEditMode","deleteChallenge","c","deleteWriteup","writeup","w","filterChallenges","toLowerCase","sort","a","b","solves","filterWriteups","challengeID","voteCount","saveWriteup","url","newWriteup","challengeName","name","challengeCategory","ctfName","hasVoted","find","v","writeupID","getVote","addVote","vote","userID","newVote","removeVote","console","log","deleteVote","_","removeTag","tag","tags","addTag","newTag","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/Users/c0nrad/Projects/ctfwriteups.org/fe/src/app/pages/ctf-edit/ctf-edit.component.ts"],"sourcesContent":["import { Location } from \"@angular/common\";\nimport { Component } from \"@angular/core\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { Challenge, ChallengeService } from \"src/app/services/challenge.service\";\nimport { CTF, CTFService } from \"src/app/services/ctf.service\";\nimport { User, UserService } from \"src/app/services/user.service\";\nimport { Vote, VoteService } from \"src/app/services/vote.service\";\nimport { Writeup, WriteupService } from \"src/app/services/writeup.service\";\n\n@Component({\n  selector: \"app-ctf-edit\",\n  template: `<div class=\"container\" style=\"padding-top: 65px\">\n      <div class=\"mb-3\" *ngIf=\"me.isAdmin\">\n        <label class=\"form-label\">CTF Name</label>\n\n        <div class=\"input-group\">\n          <input type=\"text\" class=\"form-control\" placeholder=\"CTF Name\" [(ngModel)]=\"ctf.name\" />\n        </div>\n\n        <div>\n          <label class=\"form-label\">CTF URL</label>\n          <input type=\"text\" class=\"form-control\" placeholder=\"CTF URL\" [(ngModel)]=\"ctf.url\" />\n        </div>\n\n        <div>\n          <label>CTF End (Unix Time, example: 1704639600)</label>\n          <input type=\"number\" class=\"form-control\" placeholder=\"CTF End Date\" [(ngModel)]=\"ctf.endDate\" />\n        </div>\n\n        <button *ngIf=\"me.isAdmin\" (click)=\"save()\" class=\"btn btn-primary\">Save</button>\n\n        <div *ngIf=\"!me.isAdmin\">\n          <h2>{{ ctf.name }}</h2>\n        </div>\n      </div>\n\n      <!-- <div *ngFor=\"let category of ctf.categories\" class=\"badge bg-secondary\">{{ category }} <button tyle=\"button\" class=\"btn-close\" (click)=\"removeCategory(category)\"></button></div> -->\n\n      <div *ngFor=\"let category of ctf.categories\">\n        <h3>{{ category }}</h3>\n        <table class=\"table table-bordered\">\n          <thead>\n            <tr>\n              <th scope=\"row\" class=\"col-2\">Challenge Name</th>\n              <th scope=\"row\" class=\"col-1\">Solves</th>\n              <th scope=\"row\" class=\"col-3\">Short Solution Description / Tags</th>\n              <th scope=\"row\" class=\"col-6\">Writeups</th>\n            </tr>\n          </thead>\n\n          <tbody>\n            <tr *ngFor=\"let challenge of filterChallenges(category)\">\n              <td>\n                <p *ngIf=\"!challenge.isEditMode\">{{ challenge.name }}</p>\n                <input *ngIf=\"challenge.isEditMode\" type=\"text\" class=\"form-control\" placeholder=\"Challenge Name\" [(ngModel)]=\"challenge.name\" />\n                <button *ngIf=\"me.isAdmin\" class=\"btn btn-danger btn-sm\" (click)=\"deleteChallenge(challenge)\">Delete</button>\n                <button *ngIf=\"!challenge.isEditMode && !!me.id\" class=\"btn btn-warning btn-sm\" (click)=\"challenge.isEditMode = true\">Edit</button>\n                <button *ngIf=\"challenge.isEditMode\" class=\"btn btn-warning btn-sm\" (click)=\"updateChallenge(challenge)\">Save</button>\n              </td>\n              <td>\n                <p *ngIf=\"!challenge.isEditMode\">{{ challenge.solves }}</p>\n                <input *ngIf=\"challenge.isEditMode\" type=\"number\" class=\"form-control\" placeholder=\"Solves\" [(ngModel)]=\"challenge.solves\" />\n              </td>\n              <td>\n                <p *ngIf=\"!challenge.isEditMode\">{{ challenge.shortDescription }}</p>\n                <input *ngIf=\"challenge.isEditMode\" type=\"text\" class=\"form-control\" placeholder=\"Short Description\" [(ngModel)]=\"challenge.shortDescription\" />\n\n                <!-- tags -->\n                <div>\n                  <span *ngFor=\"let tag of challenge.tags\" class=\"badge bg-secondary me-1\"\n                    >{{ tag }} <button *ngIf=\"challenge.isEditMode\" class=\"btn-close\" (click)=\"removeTag(challenge, tag)\"></button\n                  ></span>\n                </div>\n                <div *ngIf=\"challenge.isEditMode\" class=\"input-group mb-3\">\n                  <input type=\"text\" class=\"form-control\" placeholder=\"New Tag\" [(ngModel)]=\"newTag\" />\n                  <button class=\"btn btn-secondary\" (click)=\"addTag(challenge, newTag)\">Add Tag</button>\n                </div>\n              </td>\n              <td>\n                <ul>\n                  <li *ngFor=\"let writeup of filterWriteups(challenge.id)\">\n                    <i *ngIf=\"!hasVoted(writeup)\" (click)=\"addVote(writeup)\" class=\"bi bi-heart\" style=\"  vertical-align: 0em;\"></i>\n                    <i *ngIf=\"hasVoted(writeup)\" (click)=\"removeVote(getVote(writeup)!, writeup)\" class=\"bi bi-heart-fill text-danger\" style=\"\"></i>\n\n                    {{ writeup.voteCount }}\n\n                    <a href=\"{{ writeup.url }}\" rel=\"noopener noreferrer\" target=\"_blank\">{{ writeup.url }}</a>\n\n                    <button *ngIf=\"me.isAdmin || writeup.submitterID == me.id\" class=\"btn btn-danger btn-sm\" (click)=\"deleteWriteup(writeup)\">Delete</button>\n                  </li>\n                </ul>\n                <div class=\"input-group\" *ngIf=\"!!me.id\">\n                  <input\n                    type=\"text\"\n                    class=\"form-control\"\n                    (keyup.enter)=\"saveWriteup(challenge, newChallengeWriteupURL[challenge.id])\"\n                    placeholder=\"Writeup URL\"\n                    [(ngModel)]=\"newChallengeWriteupURL[challenge.id]\"\n                  />\n                  <button class=\"btn btn-secondary btn-sm\" (click)=\"saveWriteup(challenge, newChallengeWriteupURL[challenge.id])\">Add Writeup</button>\n                </div>\n              </td>\n            </tr>\n\n            <tr *ngIf=\"me.isAdmin\">\n              <td>\n                <input type=\"text\" class=\"form-control\" placeholder=\"Challenge Name\" (keyup.enter)=\"saveChallenge(category)\" [(ngModel)]=\"newCategoryChallenge[category].name\" />\n              </td>\n              <td>\n                <input type=\"number\" class=\"form-control\" placeholder=\"Solves\" [(ngModel)]=\"newCategoryChallenge[category].solves\" />\n              </td>\n\n              <td>\n                <input type=\"text\" class=\"form-control\" placeholder=\"Short Description\" [(ngModel)]=\"newCategoryChallenge[category].shortDescription\" />\n              </td>\n\n              <td>\n                <button class=\"btn btn-primary btn-sm\" (click)=\"saveChallenge(category)\">Save New Challenge</button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n\n      <div *ngIf=\"me.isAdmin\" class=\"input-group mb-3\">\n        <input type=\"text\" class=\"form-control\" placeholder=\"New Category\" [(ngModel)]=\"newCategory\" />\n        <button class=\"btn btn-secondary\" (click)=\"addCategory(newCategory)\">Add Category</button>\n      </div>\n    </div>\n    <!-- ji --> `,\n  styles: [],\n})\nexport class CtfEditComponent {\n  ctfID: string = \"\";\n  ctf: CTF = {} as CTF;\n  me: User = {} as User;\n  newCategory = \"\";\n  newCategoryChallenge: { [key: string]: Challenge } = {};\n  newChallengeWriteupURL: { [key: string]: string } = {};\n  newTag = \"\";\n\n  challenges: Challenge[] = [];\n  writeups: Writeup[] = [];\n  votes: Vote[] = [];\n\n  constructor(\n    private route: ActivatedRoute,\n    private ctfService: CTFService,\n    private location: Location,\n    private userService: UserService,\n    private writeupService: WriteupService,\n    private voteService: VoteService,\n    private challengeService: ChallengeService\n  ) {}\n\n  ngOnInit() {\n    this.userService.getMe().subscribe((me) => {\n      this.me = me;\n    });\n\n    this.voteService.getVotes().subscribe((votes) => {\n      this.votes = votes || [];\n    });\n\n    this.route.params.subscribe((params) => {\n      if (params[\"id\"]) {\n        this.ctfID = params[\"id\"];\n        if (this.ctfID == \"new\") {\n          this.ctf = {} as CTF;\n          this.ctf.submitterID = this.me.id;\n          this.ctf.categories = [];\n          this.ctf.endDate = Date.now();\n          return;\n        }\n\n        this.ctfService.getCTF(params[\"id\"]).subscribe((ctf) => {\n          this.ctf = ctf;\n\n          for (let category of this.ctf.categories) {\n            this.newCategoryChallenge[category] = { ctfID: this.ctf.id, category: category } as Challenge;\n          }\n        });\n\n        this.challengeService.getChallenges(params[\"id\"]).subscribe((challenges) => {\n          if (!challenges) {\n            this.challenges = [];\n            return;\n          }\n          this.challenges = challenges;\n          this.newChallengeWriteupURL = {};\n          for (let challenge of this.challenges) {\n            this.newChallengeWriteupURL[challenge.id] = \"\";\n          }\n        });\n\n        this.writeupService.getWriteupsForCTF(params[\"id\"]).subscribe((writeups) => {\n          this.writeups = writeups || [];\n        });\n      } else {\n        this.ctf.submitterID = this.me.id;\n      }\n    });\n  }\n\n  newCTF() {\n    this.location.go(\"/ctfs/new\");\n  }\n\n  save() {\n    if (this.ctf.id) {\n      this.ctfService.updateCTF(this.ctf).subscribe(() => {\n        this.location.go(`/ctfs/${this.ctf.id}/edit`);\n      });\n    } else {\n      this.ctfService.newCTF(this.ctf).subscribe((ctf) => {\n        this.ctf = ctf;\n        this.location.go(`/ctfs/${this.ctf.id}/edit`);\n      });\n    }\n  }\n\n  removeCategory(category: string) {\n    if (!this.ctf.categories) {\n      this.ctf.categories = [];\n    }\n    this.ctf.categories = this.ctf.categories.filter((t) => t !== category);\n  }\n\n  addCategory(category: string) {\n    if (!this.ctf.categories) {\n      this.ctf.categories = [];\n    }\n    this.ctf.categories.push(category);\n    this.newCategory = \"\";\n    this.newCategoryChallenge[category] = { ctfID: this.ctf.id, category: category } as Challenge;\n    this.save();\n  }\n\n  saveChallenge(category: string) {\n    this.challengeService.newChallenge(this.newCategoryChallenge[category]).subscribe((challenge) => {\n      this.challenges.push(challenge);\n      this.newCategoryChallenge[category] = { ctfID: this.ctf.id, category: category } as Challenge;\n    });\n  }\n\n  updateChallenge(challenge: Challenge) {\n    this.challengeService.updateChallenge(challenge).subscribe(() => {\n      challenge.isEditMode = false;\n    });\n  }\n\n  deleteChallenge(challenge: Challenge) {\n    this.challengeService.deleteChallenge(challenge).subscribe(() => {\n      this.challenges = this.challenges.filter((c) => c.id !== challenge.id);\n    });\n  }\n\n  deleteWriteup(writeup: Writeup) {\n    this.writeupService.deleteWriteup(writeup).subscribe(() => {\n      this.writeups = this.writeups.filter((w) => w.id !== writeup.id);\n    });\n  }\n\n  filterChallenges(category: string): Challenge[] {\n    if (this.challenges == null) {\n      return [];\n    }\n\n    return this.challenges.filter((challenge) => challenge.category.toLowerCase() === category.toLowerCase()).sort((a, b) => b.solves - a.solves);\n  }\n\n  filterWriteups(challengeID: string): Writeup[] {\n    if (this.writeups == null) {\n      return [];\n    }\n\n    return this.writeups.filter((writeup) => writeup.challengeID === challengeID).sort((a, b) => b.voteCount - a.voteCount);\n  }\n\n  saveWriteup(challenge: Challenge, url: string) {\n    this.writeupService\n      .newWriteup({\n        challengeID: challenge.id,\n        challengeName: challenge.name,\n        challengeCategory: challenge.category,\n        ctfName: this.ctf.name,\n        url: url,\n        ctfID: this.ctf.id,\n        submitterID: this.me.id,\n      } as Writeup)\n      .subscribe((writeup) => {\n        this.writeups.push(writeup);\n        this.newChallengeWriteupURL[challenge.id] = \"\";\n      });\n  }\n\n  hasVoted(writeup: Writeup): boolean {\n    if (!this.votes) {\n    }\n    return !!this.votes.find((v) => v.writeupID === writeup.id);\n  }\n\n  getVote(writeup: Writeup): Vote | undefined {\n    return this.votes.find((v) => v.writeupID === writeup.id);\n  }\n\n  addVote(writeup: Writeup): void {\n    const vote: Vote = {\n      writeupID: writeup.id,\n      userID: this.me.id,\n    } as Vote;\n\n    this.voteService.newVote(vote).subscribe((v) => {\n      this.votes.push(v);\n      writeup.voteCount++;\n    });\n  }\n\n  removeVote(vote: Vote, writeup: Writeup): void {\n    console.log(\"remove vote\", vote);\n    this.voteService.deleteVote(vote).subscribe((_) => {\n      this.votes = this.votes.filter((v) => vote.id !== v.id);\n      writeup.voteCount--;\n    });\n  }\n\n  removeTag(challenge: Challenge, tag: string) {\n    challenge.tags = challenge.tags.filter((t: string) => t !== tag);\n    this.challengeService.updateChallenge(challenge).subscribe((c) => {\n      challenge = c;\n    });\n  }\n\n  addTag(challenge: Challenge, tag: string) {\n    if (!challenge.tags) {\n      challenge.tags = [];\n    }\n    challenge.tags.push(tag);\n    this.newTag = \"\";\n    this.challengeService.updateChallenge(challenge).subscribe((c) => {\n      challenge = c;\n    });\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}
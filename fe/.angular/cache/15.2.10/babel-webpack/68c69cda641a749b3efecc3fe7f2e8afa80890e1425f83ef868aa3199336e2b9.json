{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/ctf.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"src/app/services/user.service\";\nimport * as i5 from \"@angular/forms\";\nfunction CtfEditComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function CtfEditComponent_div_8_Template_button_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const category_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.removeCategory(category_r2));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const category_r2 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", category_r2, \" \");\n  }\n}\nconst _c0 = function (a1) {\n  return [\"/writeups\", a1, \"edit\"];\n};\nfunction CtfEditComponent_div_9_tr_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\")(6, \"a\", 15);\n    i0.ɵɵtext(7, \"Writeups\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const challenge_r7 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(challenge_r7.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(challenge_r7.solves);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(3, _c0, challenge_r7.id));\n  }\n}\nfunction CtfEditComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"h3\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"table\", 11)(4, \"tr\")(5, \"th\");\n    i0.ɵɵtext(6, \"Challenge Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"Solves\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\");\n    i0.ɵɵtext(10, \"Writeups\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(11, CtfEditComponent_div_9_tr_11_Template, 8, 5, \"tr\", 7);\n    i0.ɵɵelementStart(12, \"tr\")(13, \"td\")(14, \"input\", 12);\n    i0.ɵɵlistener(\"ngModelChange\", function CtfEditComponent_div_9_Template_input_ngModelChange_14_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const category_r5 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.newCategoryChallenge[category_r5].name = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"td\")(16, \"input\", 13);\n    i0.ɵɵlistener(\"ngModelChange\", function CtfEditComponent_div_9_Template_input_ngModelChange_16_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const category_r5 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.newCategoryChallenge[category_r5].solves = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function CtfEditComponent_div_9_Template_button_click_17_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const category_r5 = restoredCtx.$implicit;\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.saveChallenge(category_r5));\n    });\n    i0.ɵɵtext(18, \"Save Challenge\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const category_r5 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(category_r5);\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.filterChallenges(category_r5));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.newCategoryChallenge[category_r5].name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.newCategoryChallenge[category_r5].solves);\n  }\n}\nexport class CtfEditComponent {\n  constructor(route, ctfService, location, userService) {\n    this.route = route;\n    this.ctfService = ctfService;\n    this.location = location;\n    this.userService = userService;\n    this.ctf = {};\n    this.me = {};\n    this.newCategory = \"\";\n    this.newCategoryChallenge = {};\n    this.challenges = [];\n  }\n  ngOnInit() {\n    this.userService.getMe().subscribe(me => {\n      this.me = me;\n      this.route.params.subscribe(params => {\n        if (params[\"id\"]) {\n          this.ctfService.getCTF(params[\"id\"]).subscribe(ctf => {\n            this.ctf = ctf;\n            for (let category of this.ctf.categories) {\n              this.newCategoryChallenge[category] = {\n                ctfID: this.ctf.id\n              };\n            }\n          });\n          this.ctfService.getChallenges(params[\"id\"]).subscribe(challenges => {\n            this.challenges = challenges;\n          });\n        } else {\n          this.ctf.submitterID = this.me.id;\n        }\n      });\n    });\n  }\n  newCTF() {\n    this.location.go(\"/ctfs/new\");\n  }\n  save() {\n    if (this.ctf.id) {\n      this.ctfService.updateCTF(this.ctf).subscribe(() => {\n        this.location.go(`/ctfs/${this.ctf.id}/edit`);\n      });\n    } else {\n      this.ctfService.newCTF(this.ctf).subscribe(ctf => {\n        this.ctf = ctf;\n        this.location.go(`/ctfs/${this.ctf.id}/edit`);\n      });\n    }\n  }\n  removeCategory(category) {\n    if (!this.ctf.categories) {\n      this.ctf.categories = [];\n    }\n    this.ctf.categories = this.ctf.categories.filter(t => t !== category);\n  }\n  addCategory(category) {\n    if (!this.ctf.categories) {\n      this.ctf.categories = [];\n    }\n    this.ctf.categories.push(category);\n    this.newCategory = \"\";\n    this.newCategoryChallenge[category] = {\n      ctfID: this.ctf.id,\n      category: category\n    };\n  }\n  saveChallenge(category) {\n    this.ctfService.newChallenge(this.newCategoryChallenge[category]).subscribe(challenge => {\n      this.challenges.push(challenge);\n    });\n  }\n  deleteChallenge() {}\n  filterChallenges(category) {\n    return this.challenges.filter(challenge => challenge.category === category);\n  }\n  static #_ = this.ɵfac = function CtfEditComponent_Factory(t) {\n    return new (t || CtfEditComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.CTFService), i0.ɵɵdirectiveInject(i3.Location), i0.ɵɵdirectiveInject(i4.UserService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CtfEditComponent,\n    selectors: [[\"app-ctf-edit\"]],\n    decls: 13,\n    vars: 5,\n    consts: [[1, \"container\", 2, \"padding-top\", \"65px\"], [1, \"mb-3\"], [1, \"form-label\"], [\"type\", \"text\", \"placeholder\", \"CTF Name\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"placeholder\", \"Categories\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"btn\", \"btn-secondary\", 3, \"click\"], [\"class\", \"badge bg-secondary\", 4, \"ngFor\", \"ngForOf\"], [4, \"ngFor\", \"ngForOf\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"badge\", \"bg-secondary\"], [\"tyle\", \"button\", 1, \"btn-close\", 3, \"click\"], [1, \"table\"], [\"type\", \"text\", \"placeholder\", \"Challenge Name\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"number\", \"placeholder\", \"Solves\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [3, \"click\"], [3, \"routerLink\"]],\n    template: function CtfEditComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"label\", 2);\n        i0.ɵɵtext(3, \"CTF Name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"input\", 3);\n        i0.ɵɵlistener(\"ngModelChange\", function CtfEditComponent_Template_input_ngModelChange_4_listener($event) {\n          return ctx.ctf.name = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(5, \"input\", 4);\n        i0.ɵɵlistener(\"ngModelChange\", function CtfEditComponent_Template_input_ngModelChange_5_listener($event) {\n          return ctx.newCategory = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"button\", 5);\n        i0.ɵɵlistener(\"click\", function CtfEditComponent_Template_button_click_6_listener() {\n          return ctx.addCategory(ctx.newCategory);\n        });\n        i0.ɵɵtext(7, \"Add Category\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(8, CtfEditComponent_div_8_Template, 3, 1, \"div\", 6);\n        i0.ɵɵtemplate(9, CtfEditComponent_div_9_Template, 19, 4, \"div\", 7);\n        i0.ɵɵelementStart(10, \"button\", 8);\n        i0.ɵɵlistener(\"click\", function CtfEditComponent_Template_button_click_10_listener() {\n          return ctx.save();\n        });\n        i0.ɵɵtext(11, \"Save\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(12);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.ctf.name);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngModel\", ctx.newCategory);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.ctf.categories);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.ctf.categories);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\" \", ctx.ctf, \" \");\n      }\n    },\n    dependencies: [i3.NgForOf, i1.RouterLink, i5.DefaultValueAccessor, i5.NumberValueAccessor, i5.NgControlStatus, i5.NgModel],\n    encapsulation: 2\n  });\n}","map":{"version":3,"mappings":"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","names":["i0","CtfEditComponent","constructor","route","ctfService","location","userService","ngOnInit","getMe","subscribe","me","params","getCTF","ctf","category","categories","newCategoryChallenge","ctfID","id","getChallenges","challenges","submitterID","newCTF","go","save","updateCTF","removeCategory","filter","t","addCategory","push","newCategory","saveChallenge","newChallenge","challenge","deleteChallenge","filterChallenges","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/Users/c0nrad/Projects/ctfwriteups.org/fe/src/app/pages/ctf-edit/ctf-edit.component.ts"],"sourcesContent":["import { Location } from \"@angular/common\";\nimport { Component } from \"@angular/core\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { CTF, CTFService, Challenge } from \"src/app/services/ctf.service\";\nimport { User, UserService } from \"src/app/services/user.service\";\n\n@Component({\n  selector: \"app-ctf-edit\",\n  template: `<div class=\"container\" style=\"padding-top: 65px\">\n    <div class=\"mb-3\">\n      <label class=\"form-label\">CTF Name</label>\n      <input type=\"text\" class=\"form-control\" placeholder=\"CTF Name\" [(ngModel)]=\"ctf.name\" />\n    </div>\n\n    <input type=\"text\" class=\"form-control\" placeholder=\"Categories\" [(ngModel)]=\"newCategory\" />\n    <button class=\"btn btn-secondary\" (click)=\"addCategory(newCategory)\">Add Category</button>\n\n    <div *ngFor=\"let category of ctf.categories\" class=\"badge bg-secondary\">{{ category }} <button tyle=\"button\" class=\"btn-close\" (click)=\"removeCategory(category)\"></button></div>\n\n    <div *ngFor=\"let category of ctf.categories\">\n      <h3>{{ category }}</h3>\n      <table class=\"table\">\n        <tr>\n          <th>Challenge Name</th>\n          <th>Solves</th>\n          <th>Writeups</th>\n        </tr>\n\n        <tr *ngFor=\"let challenge of filterChallenges(category)\">\n          <td>{{ challenge.name }}</td>\n          <td>{{ challenge.solves }}</td>\n          <td><a [routerLink]=\"['/writeups', challenge.id, 'edit']\">Writeups</a></td>\n        </tr>\n\n        <tr>\n          <td>\n            <input type=\"text\" class=\"form-control\" placeholder=\"Challenge Name\" [(ngModel)]=\"newCategoryChallenge[category].name\" />\n          </td>\n          <td>\n            <input type=\"number\" class=\"form-control\" placeholder=\"Solves\" [(ngModel)]=\"newCategoryChallenge[category].solves\" />\n          </td>\n\n          <button (click)=\"saveChallenge(category)\">Save Challenge</button>\n        </tr>\n      </table>\n    </div>\n\n    <button (click)=\"save()\" class=\"btn btn-primary\">Save</button>\n\n    {{ ctf }}\n  </div>`,\n  styles: [],\n})\nexport class CtfEditComponent {\n  ctf: CTF = {} as CTF;\n  me: User = {} as User;\n  newCategory = \"\";\n  newCategoryChallenge: { [key: string]: Challenge } = {};\n  challenges: Challenge[] = [];\n\n  constructor(private route: ActivatedRoute, private ctfService: CTFService, private location: Location, private userService: UserService) {}\n\n  ngOnInit() {\n    this.userService.getMe().subscribe((me) => {\n      this.me = me;\n\n      this.route.params.subscribe((params) => {\n        if (params[\"id\"]) {\n          this.ctfService.getCTF(params[\"id\"]).subscribe((ctf) => {\n            this.ctf = ctf;\n\n            for (let category of this.ctf.categories) {\n              this.newCategoryChallenge[category] = { ctfID: this.ctf.id } as Challenge;\n            }\n          });\n\n          this.ctfService.getChallenges(params[\"id\"]).subscribe((challenges) => {\n            this.challenges = challenges;\n          });\n        } else {\n          this.ctf.submitterID = this.me.id;\n        }\n      });\n    });\n  }\n\n  newCTF() {\n    this.location.go(\"/ctfs/new\");\n  }\n\n  save() {\n    if (this.ctf.id) {\n      this.ctfService.updateCTF(this.ctf).subscribe(() => {\n        this.location.go(`/ctfs/${this.ctf.id}/edit`);\n      });\n    } else {\n      this.ctfService.newCTF(this.ctf).subscribe((ctf) => {\n        this.ctf = ctf;\n        this.location.go(`/ctfs/${this.ctf.id}/edit`);\n      });\n    }\n  }\n\n  removeCategory(category: string) {\n    if (!this.ctf.categories) {\n      this.ctf.categories = [];\n    }\n    this.ctf.categories = this.ctf.categories.filter((t) => t !== category);\n  }\n\n  addCategory(category: string) {\n    if (!this.ctf.categories) {\n      this.ctf.categories = [];\n    }\n    this.ctf.categories.push(category);\n    this.newCategory = \"\";\n    this.newCategoryChallenge[category] = { ctfID: this.ctf.id, category: category } as Challenge;\n  }\n\n  saveChallenge(category: string) {\n    this.ctfService.newChallenge(this.newCategoryChallenge[category]).subscribe((challenge) => {\n      this.challenges.push(challenge);\n    });\n  }\n\n  deleteChallenge() {}\n\n  filterChallenges(category: string): Challenge[] {\n    return this.challenges.filter((challenge) => challenge.category === category);\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}
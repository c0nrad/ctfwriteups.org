{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/ctf.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"src/app/services/user.service\";\nimport * as i5 from \"src/app/services/writeup.service\";\nimport * as i6 from \"@angular/forms\";\nfunction CtfEditComponent_div_5_tr_15_p_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const challenge_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(challenge_r3.name);\n  }\n}\nfunction CtfEditComponent_div_5_tr_15_input_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"input\", 10);\n    i0.ɵɵlistener(\"ngModelChange\", function CtfEditComponent_div_5_tr_15_input_3_Template_input_ngModelChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r16);\n      const challenge_r3 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(challenge_r3.name = $event);\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const challenge_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"ngModel\", challenge_r3.name);\n  }\n}\nfunction CtfEditComponent_div_5_tr_15_button_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function CtfEditComponent_div_5_tr_15_button_6_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r20);\n      const challenge_r3 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(challenge_r3.isEditMode = true);\n    });\n    i0.ɵɵtext(1, \"Edit\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CtfEditComponent_div_5_tr_15_button_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function CtfEditComponent_div_5_tr_15_button_7_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const challenge_r3 = i0.ɵɵnextContext().$implicit;\n      const ctx_r21 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r21.updateChallenge(challenge_r3));\n    });\n    i0.ɵɵtext(1, \"Save\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CtfEditComponent_div_5_tr_15_p_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const challenge_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(challenge_r3.solves);\n  }\n}\nfunction CtfEditComponent_div_5_tr_15_input_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"input\", 11);\n    i0.ɵɵlistener(\"ngModelChange\", function CtfEditComponent_div_5_tr_15_input_10_Template_input_ngModelChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r27);\n      const challenge_r3 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(challenge_r3.solves = $event);\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const challenge_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"ngModel\", challenge_r3.solves);\n  }\n}\nfunction CtfEditComponent_div_5_tr_15_p_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const challenge_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(challenge_r3.shortDescription);\n  }\n}\nfunction CtfEditComponent_div_5_tr_15_input_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r32 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"input\", 12);\n    i0.ɵɵlistener(\"ngModelChange\", function CtfEditComponent_div_5_tr_15_input_13_Template_input_ngModelChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r32);\n      const challenge_r3 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(challenge_r3.shortDescription = $event);\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const challenge_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"ngModel\", challenge_r3.shortDescription);\n  }\n}\nfunction CtfEditComponent_div_5_tr_15_li_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r36 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 24);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function CtfEditComponent_div_5_tr_15_li_16_Template_button_click_3_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r36);\n      const writeup_r34 = restoredCtx.$implicit;\n      const ctx_r35 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r35.deleteWriteup(writeup_r34));\n    });\n    i0.ɵɵtext(4, \"Delete\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const writeup_r34 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"href\", writeup_r34.url, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\"(\", writeup_r34.votes || 0, \") \", writeup_r34.url, \"\");\n  }\n}\nfunction CtfEditComponent_div_5_tr_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r38 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtemplate(2, CtfEditComponent_div_5_tr_15_p_2_Template, 2, 1, \"p\", 14);\n    i0.ɵɵtemplate(3, CtfEditComponent_div_5_tr_15_input_3_Template, 1, 1, \"input\", 15);\n    i0.ɵɵelementStart(4, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function CtfEditComponent_div_5_tr_15_Template_button_click_4_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r38);\n      const challenge_r3 = restoredCtx.$implicit;\n      const ctx_r37 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r37.deleteChallenge(challenge_r3));\n    });\n    i0.ɵɵtext(5, \"Delete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, CtfEditComponent_div_5_tr_15_button_6_Template, 2, 0, \"button\", 17);\n    i0.ɵɵtemplate(7, CtfEditComponent_div_5_tr_15_button_7_Template, 2, 0, \"button\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtemplate(9, CtfEditComponent_div_5_tr_15_p_9_Template, 2, 1, \"p\", 14);\n    i0.ɵɵtemplate(10, CtfEditComponent_div_5_tr_15_input_10_Template, 1, 1, \"input\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtemplate(12, CtfEditComponent_div_5_tr_15_p_12_Template, 2, 1, \"p\", 14);\n    i0.ɵɵtemplate(13, CtfEditComponent_div_5_tr_15_input_13_Template, 1, 1, \"input\", 19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"td\")(15, \"ul\");\n    i0.ɵɵtemplate(16, CtfEditComponent_div_5_tr_15_li_16_Template, 5, 3, \"li\", 4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"div\", 20)(18, \"input\", 21);\n    i0.ɵɵlistener(\"ngModelChange\", function CtfEditComponent_div_5_tr_15_Template_input_ngModelChange_18_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r38);\n      const challenge_r3 = restoredCtx.$implicit;\n      const ctx_r39 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r39.newChallengeWriteupURL[challenge_r3.id] = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"button\", 22);\n    i0.ɵɵlistener(\"click\", function CtfEditComponent_div_5_tr_15_Template_button_click_19_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r38);\n      const challenge_r3 = restoredCtx.$implicit;\n      const ctx_r40 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r40.saveWriteup(challenge_r3, ctx_r40.newChallengeWriteupURL[challenge_r3.id]));\n    });\n    i0.ɵɵtext(20, \"Add Writeup\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const challenge_r3 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !challenge_r3.isEditMode);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", challenge_r3.isEditMode);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", !challenge_r3.isEditMode);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", challenge_r3.isEditMode);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !challenge_r3.isEditMode);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", challenge_r3.isEditMode);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !challenge_r3.isEditMode);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", challenge_r3.isEditMode);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.filterWriteups(challenge_r3.id));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.newChallengeWriteupURL[challenge_r3.id]);\n  }\n}\nfunction CtfEditComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r42 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"h3\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"table\", 9)(4, \"thead\")(5, \"tr\")(6, \"th\");\n    i0.ɵɵtext(7, \"Challenge Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9, \"Solves\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\");\n    i0.ɵɵtext(11, \"Short Solution Description\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\");\n    i0.ɵɵtext(13, \"Writeups\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(14, \"tbody\");\n    i0.ɵɵtemplate(15, CtfEditComponent_div_5_tr_15_Template, 21, 10, \"tr\", 4);\n    i0.ɵɵelementStart(16, \"tr\")(17, \"td\")(18, \"input\", 10);\n    i0.ɵɵlistener(\"ngModelChange\", function CtfEditComponent_div_5_Template_input_ngModelChange_18_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r42);\n      const category_r1 = restoredCtx.$implicit;\n      const ctx_r41 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r41.newCategoryChallenge[category_r1].name = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(19, \"td\")(20, \"input\", 11);\n    i0.ɵɵlistener(\"ngModelChange\", function CtfEditComponent_div_5_Template_input_ngModelChange_20_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r42);\n      const category_r1 = restoredCtx.$implicit;\n      const ctx_r43 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r43.newCategoryChallenge[category_r1].solves = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(21, \"td\")(22, \"input\", 12);\n    i0.ɵɵlistener(\"ngModelChange\", function CtfEditComponent_div_5_Template_input_ngModelChange_22_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r42);\n      const category_r1 = restoredCtx.$implicit;\n      const ctx_r44 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r44.newCategoryChallenge[category_r1].shortDescription = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(23, \"td\")(24, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function CtfEditComponent_div_5_Template_button_click_24_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r42);\n      const category_r1 = restoredCtx.$implicit;\n      const ctx_r45 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r45.saveChallenge(category_r1));\n    });\n    i0.ɵɵtext(25, \"Save New Challenge\");\n    i0.ɵɵelementEnd()()()()()();\n  }\n  if (rf & 2) {\n    const category_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(category_r1);\n    i0.ɵɵadvance(13);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.filterChallenges(category_r1));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.newCategoryChallenge[category_r1].name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.newCategoryChallenge[category_r1].solves);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.newCategoryChallenge[category_r1].shortDescription);\n  }\n}\nexport class CtfEditComponent {\n  constructor(route, ctfService, location, userService, writeupService) {\n    this.route = route;\n    this.ctfService = ctfService;\n    this.location = location;\n    this.userService = userService;\n    this.writeupService = writeupService;\n    this.ctf = {};\n    this.me = {};\n    this.newCategory = \"\";\n    this.newCategoryChallenge = {};\n    this.newChallengeWriteupURL = {};\n    this.challenges = [];\n    this.writeups = [];\n  }\n  ngOnInit() {\n    this.userService.getMe().subscribe(me => {\n      this.me = me;\n      this.route.params.subscribe(params => {\n        if (params[\"id\"]) {\n          this.ctfService.getCTF(params[\"id\"]).subscribe(ctf => {\n            this.ctf = ctf;\n            for (let category of this.ctf.categories) {\n              this.newCategoryChallenge[category] = {\n                ctfID: this.ctf.id,\n                category: category\n              };\n            }\n          });\n          this.ctfService.getChallenges(params[\"id\"]).subscribe(challenges => {\n            this.challenges = challenges;\n            this.newChallengeWriteupURL = {};\n            for (let challenge of this.challenges) {\n              this.newChallengeWriteupURL[challenge.id] = \"\";\n            }\n          });\n          this.writeupService.getWriteupsForCTF(params[\"id\"]).subscribe(writeups => {\n            this.writeups = writeups;\n          });\n        } else {\n          this.ctf.submitterID = this.me.id;\n        }\n      });\n    });\n  }\n  newCTF() {\n    this.location.go(\"/ctfs/new\");\n  }\n  save() {\n    if (this.ctf.id) {\n      this.ctfService.updateCTF(this.ctf).subscribe(() => {\n        this.location.go(`/ctfs/${this.ctf.id}/edit`);\n      });\n    } else {\n      this.ctfService.newCTF(this.ctf).subscribe(ctf => {\n        this.ctf = ctf;\n        this.location.go(`/ctfs/${this.ctf.id}/edit`);\n      });\n    }\n  }\n  removeCategory(category) {\n    if (!this.ctf.categories) {\n      this.ctf.categories = [];\n    }\n    this.ctf.categories = this.ctf.categories.filter(t => t !== category);\n  }\n  addCategory(category) {\n    if (!this.ctf.categories) {\n      this.ctf.categories = [];\n    }\n    this.ctf.categories.push(category);\n    this.newCategory = \"\";\n    this.newCategoryChallenge[category] = {\n      ctfID: this.ctf.id,\n      category: category\n    };\n    this.save();\n  }\n  saveChallenge(category) {\n    this.ctfService.newChallenge(this.newCategoryChallenge[category]).subscribe(challenge => {\n      this.challenges.push(challenge);\n    });\n  }\n  updateChallenge(challenge) {\n    this.ctfService.updateChallenge(challenge).subscribe(() => {\n      challenge.isEditMode = false;\n    });\n  }\n  deleteChallenge(challenge) {\n    this.ctfService.deleteChallenge(challenge).subscribe(() => {\n      this.challenges = this.challenges.filter(c => c.id !== challenge.id);\n    });\n  }\n  deleteWriteup(writeup) {\n    this.writeupService.deleteWriteup(writeup).subscribe(() => {\n      this.writeups = this.writeups.filter(w => w.id !== writeup.id);\n    });\n  }\n  filterChallenges(category) {\n    if (this.challenges == null) {\n      return [];\n    }\n    return this.challenges.filter(challenge => challenge.category === category).sort((a, b) => b.solves - a.solves);\n  }\n  filterWriteups(challengeID) {\n    if (this.writeups == null) {\n      return [];\n    }\n    return this.writeups.filter(writeup => writeup.challengeID === challengeID);\n  }\n  saveWriteup(challenge, url) {\n    this.writeupService.newWriteup({\n      challengeID: challenge.id,\n      challengeName: challenge.name,\n      challengeCategory: challenge.category,\n      ctfName: this.ctf.name,\n      url: url,\n      ctfID: this.ctf.id,\n      submitterID: this.me.id\n    }).subscribe(writeup => {\n      this.writeups.push(writeup);\n    });\n  }\n  static #_ = this.ɵfac = function CtfEditComponent_Factory(t) {\n    return new (t || CtfEditComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.CTFService), i0.ɵɵdirectiveInject(i3.Location), i0.ɵɵdirectiveInject(i4.UserService), i0.ɵɵdirectiveInject(i5.WriteupService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CtfEditComponent,\n    selectors: [[\"app-ctf-edit\"]],\n    decls: 12,\n    vars: 3,\n    consts: [[1, \"container\", 2, \"padding-top\", \"65px\"], [1, \"mb-3\"], [1, \"form-label\"], [\"type\", \"text\", \"placeholder\", \"CTF Name\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [4, \"ngFor\", \"ngForOf\"], [1, \"input-group\", \"mb-3\"], [\"type\", \"text\", \"placeholder\", \"New Category\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"btn\", \"btn-secondary\", 3, \"click\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"table\", \"table-bordered\"], [\"type\", \"text\", \"placeholder\", \"Challenge Name\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"number\", \"placeholder\", \"Solves\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"placeholder\", \"Short Description\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"btn\", \"btn-primary\", \"btn-sm\", 3, \"click\"], [4, \"ngIf\"], [\"type\", \"text\", \"class\", \"form-control\", \"placeholder\", \"Challenge Name\", 3, \"ngModel\", \"ngModelChange\", 4, \"ngIf\"], [1, \"btn\", \"btn-danger\", \"btn-sm\", 3, \"click\"], [\"class\", \"btn btn-warning btn-sm\", 3, \"click\", 4, \"ngIf\"], [\"type\", \"number\", \"class\", \"form-control\", \"placeholder\", \"Solves\", 3, \"ngModel\", \"ngModelChange\", 4, \"ngIf\"], [\"type\", \"text\", \"class\", \"form-control\", \"placeholder\", \"Short Description\", 3, \"ngModel\", \"ngModelChange\", 4, \"ngIf\"], [1, \"input-group\"], [\"type\", \"text\", \"placeholder\", \"Writeup URL\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"btn\", \"btn-secondary\", \"btn-sm\", 3, \"click\"], [1, \"btn\", \"btn-warning\", \"btn-sm\", 3, \"click\"], [\"target\", \"_blank\", 3, \"href\"]],\n    template: function CtfEditComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"label\", 2);\n        i0.ɵɵtext(3, \"CTF Name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"input\", 3);\n        i0.ɵɵlistener(\"ngModelChange\", function CtfEditComponent_Template_input_ngModelChange_4_listener($event) {\n          return ctx.ctf.name = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(5, CtfEditComponent_div_5_Template, 26, 5, \"div\", 4);\n        i0.ɵɵelementStart(6, \"div\", 5)(7, \"input\", 6);\n        i0.ɵɵlistener(\"ngModelChange\", function CtfEditComponent_Template_input_ngModelChange_7_listener($event) {\n          return ctx.newCategory = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"button\", 7);\n        i0.ɵɵlistener(\"click\", function CtfEditComponent_Template_button_click_8_listener() {\n          return ctx.addCategory(ctx.newCategory);\n        });\n        i0.ɵɵtext(9, \"Add Category\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(10, \"button\", 8);\n        i0.ɵɵlistener(\"click\", function CtfEditComponent_Template_button_click_10_listener() {\n          return ctx.save();\n        });\n        i0.ɵɵtext(11, \"Save\");\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.ctf.name);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.ctf.categories);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.newCategory);\n      }\n    },\n    dependencies: [i3.NgForOf, i3.NgIf, i6.DefaultValueAccessor, i6.NumberValueAccessor, i6.NgControlStatus, i6.NgModel],\n    encapsulation: 2\n  });\n}","map":{"version":3,"mappings":"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","names":["i0","CtfEditComponent","constructor","route","ctfService","location","userService","writeupService","ngOnInit","getMe","subscribe","me","params","getCTF","ctf","category","categories","newCategoryChallenge","ctfID","id","getChallenges","challenges","newChallengeWriteupURL","challenge","getWriteupsForCTF","writeups","submitterID","newCTF","go","save","updateCTF","removeCategory","filter","t","addCategory","push","newCategory","saveChallenge","newChallenge","updateChallenge","isEditMode","deleteChallenge","c","deleteWriteup","writeup","w","filterChallenges","sort","a","b","solves","filterWriteups","challengeID","saveWriteup","url","newWriteup","challengeName","name","challengeCategory","ctfName","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/Users/c0nrad/Projects/ctfwriteups.org/fe/src/app/pages/ctf-edit/ctf-edit.component.ts"],"sourcesContent":["import { Location } from \"@angular/common\";\nimport { Component } from \"@angular/core\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { CTF, CTFService, Challenge } from \"src/app/services/ctf.service\";\nimport { User, UserService } from \"src/app/services/user.service\";\nimport { Writeup, WriteupService } from \"src/app/services/writeup.service\";\n\n@Component({\n  selector: \"app-ctf-edit\",\n  template: `<div class=\"container\" style=\"padding-top: 65px\">\n    <div class=\"mb-3\">\n      <label class=\"form-label\">CTF Name</label>\n      <input type=\"text\" class=\"form-control\" placeholder=\"CTF Name\" [(ngModel)]=\"ctf.name\" />\n    </div>\n\n    <!-- <div *ngFor=\"let category of ctf.categories\" class=\"badge bg-secondary\">{{ category }} <button tyle=\"button\" class=\"btn-close\" (click)=\"removeCategory(category)\"></button></div> -->\n\n    <div *ngFor=\"let category of ctf.categories\">\n      <h3>{{ category }}</h3>\n      <table class=\"table table-bordered\">\n        <thead>\n          <tr>\n            <th>Challenge Name</th>\n            <th>Solves</th>\n            <th>Short Solution Description</th>\n            <th>Writeups</th>\n          </tr>\n        </thead>\n\n        <tbody>\n          <tr *ngFor=\"let challenge of filterChallenges(category)\">\n            <td>\n              <p *ngIf=\"!challenge.isEditMode\">{{ challenge.name }}</p>\n              <input *ngIf=\"challenge.isEditMode\" type=\"text\" class=\"form-control\" placeholder=\"Challenge Name\" [(ngModel)]=\"challenge.name\" />\n              <button class=\"btn btn-danger btn-sm\" (click)=\"deleteChallenge(challenge)\">Delete</button>\n              <button *ngIf=\"!challenge.isEditMode\" class=\"btn btn-warning btn-sm\" (click)=\"challenge.isEditMode = true\">Edit</button>\n              <button *ngIf=\"challenge.isEditMode\" class=\"btn btn-warning btn-sm\" (click)=\"updateChallenge(challenge)\">Save</button>\n            </td>\n            <td>\n              <p *ngIf=\"!challenge.isEditMode\">{{ challenge.solves }}</p>\n              <input *ngIf=\"challenge.isEditMode\" type=\"number\" class=\"form-control\" placeholder=\"Solves\" [(ngModel)]=\"challenge.solves\" />\n            </td>\n            <td>\n              <p *ngIf=\"!challenge.isEditMode\">{{ challenge.shortDescription }}</p>\n              <input *ngIf=\"challenge.isEditMode\" type=\"text\" class=\"form-control\" placeholder=\"Short Description\" [(ngModel)]=\"challenge.shortDescription\" />\n            </td>\n            <td>\n              <ul>\n                <li *ngFor=\"let writeup of filterWriteups(challenge.id)\">\n                  <a href=\"{{ writeup.url }}\" target=\"_blank\">({{ writeup.votes || 0 }}) {{ writeup.url }}</a>\n\n                  <button class=\"btn btn-danger btn-sm\" (click)=\"deleteWriteup(writeup)\">Delete</button>\n                </li>\n              </ul>\n              <div class=\"input-group\">\n                <input type=\"text\" class=\"form-control\" placeholder=\"Writeup URL\" [(ngModel)]=\"newChallengeWriteupURL[challenge.id]\" />\n                <button class=\"btn btn-secondary btn-sm\" (click)=\"saveWriteup(challenge, newChallengeWriteupURL[challenge.id])\">Add Writeup</button>\n              </div>\n            </td>\n          </tr>\n\n          <tr>\n            <td>\n              <input type=\"text\" class=\"form-control\" placeholder=\"Challenge Name\" [(ngModel)]=\"newCategoryChallenge[category].name\" />\n            </td>\n            <td>\n              <input type=\"number\" class=\"form-control\" placeholder=\"Solves\" [(ngModel)]=\"newCategoryChallenge[category].solves\" />\n            </td>\n\n            <td>\n              <input type=\"text\" class=\"form-control\" placeholder=\"Short Description\" [(ngModel)]=\"newCategoryChallenge[category].shortDescription\" />\n            </td>\n\n            <td>\n              <button class=\"btn btn-primary btn-sm\" (click)=\"saveChallenge(category)\">Save New Challenge</button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n\n    <div class=\"input-group mb-3\">\n      <input type=\"text\" class=\"form-control\" placeholder=\"New Category\" [(ngModel)]=\"newCategory\" />\n      <button class=\"btn btn-secondary\" (click)=\"addCategory(newCategory)\">Add Category</button>\n    </div>\n\n    <button (click)=\"save()\" class=\"btn btn-primary\">Save</button>\n  </div>`,\n  styles: [],\n})\nexport class CtfEditComponent {\n  ctf: CTF = {} as CTF;\n  me: User = {} as User;\n  newCategory = \"\";\n  newCategoryChallenge: { [key: string]: Challenge } = {};\n  newChallengeWriteupURL: { [key: string]: string } = {};\n\n  challenges: Challenge[] = [];\n  writeups: Writeup[] = [];\n\n  constructor(private route: ActivatedRoute, private ctfService: CTFService, private location: Location, private userService: UserService, private writeupService: WriteupService) {}\n\n  ngOnInit() {\n    this.userService.getMe().subscribe((me) => {\n      this.me = me;\n\n      this.route.params.subscribe((params) => {\n        if (params[\"id\"]) {\n          this.ctfService.getCTF(params[\"id\"]).subscribe((ctf) => {\n            this.ctf = ctf;\n\n            for (let category of this.ctf.categories) {\n              this.newCategoryChallenge[category] = { ctfID: this.ctf.id, category: category } as Challenge;\n            }\n          });\n\n          this.ctfService.getChallenges(params[\"id\"]).subscribe((challenges) => {\n            this.challenges = challenges;\n            this.newChallengeWriteupURL = {};\n            for (let challenge of this.challenges) {\n              this.newChallengeWriteupURL[challenge.id] = \"\";\n            }\n          });\n\n          this.writeupService.getWriteupsForCTF(params[\"id\"]).subscribe((writeups) => {\n            this.writeups = writeups;\n          });\n        } else {\n          this.ctf.submitterID = this.me.id;\n        }\n      });\n    });\n  }\n\n  newCTF() {\n    this.location.go(\"/ctfs/new\");\n  }\n\n  save() {\n    if (this.ctf.id) {\n      this.ctfService.updateCTF(this.ctf).subscribe(() => {\n        this.location.go(`/ctfs/${this.ctf.id}/edit`);\n      });\n    } else {\n      this.ctfService.newCTF(this.ctf).subscribe((ctf) => {\n        this.ctf = ctf;\n        this.location.go(`/ctfs/${this.ctf.id}/edit`);\n      });\n    }\n  }\n\n  removeCategory(category: string) {\n    if (!this.ctf.categories) {\n      this.ctf.categories = [];\n    }\n    this.ctf.categories = this.ctf.categories.filter((t) => t !== category);\n  }\n\n  addCategory(category: string) {\n    if (!this.ctf.categories) {\n      this.ctf.categories = [];\n    }\n    this.ctf.categories.push(category);\n    this.newCategory = \"\";\n    this.newCategoryChallenge[category] = { ctfID: this.ctf.id, category: category } as Challenge;\n    this.save();\n  }\n\n  saveChallenge(category: string) {\n    this.ctfService.newChallenge(this.newCategoryChallenge[category]).subscribe((challenge) => {\n      this.challenges.push(challenge);\n    });\n  }\n\n  updateChallenge(challenge: Challenge) {\n    this.ctfService.updateChallenge(challenge).subscribe(() => {\n      challenge.isEditMode = false;\n    });\n  }\n\n  deleteChallenge(challenge: Challenge) {\n    this.ctfService.deleteChallenge(challenge).subscribe(() => {\n      this.challenges = this.challenges.filter((c) => c.id !== challenge.id);\n    });\n  }\n\n  deleteWriteup(writeup: Writeup) {\n    this.writeupService.deleteWriteup(writeup).subscribe(() => {\n      this.writeups = this.writeups.filter((w) => w.id !== writeup.id);\n    });\n  }\n\n  filterChallenges(category: string): Challenge[] {\n    if (this.challenges == null) {\n      return [];\n    }\n    return this.challenges.filter((challenge) => challenge.category === category).sort((a, b) => b.solves - a.solves);\n  }\n\n  filterWriteups(challengeID: string): Writeup[] {\n    if (this.writeups == null) {\n      return [];\n    }\n\n    return this.writeups.filter((writeup) => writeup.challengeID === challengeID);\n  }\n\n  saveWriteup(challenge: Challenge, url: string) {\n    this.writeupService\n      .newWriteup({\n        challengeID: challenge.id,\n        challengeName: challenge.name,\n        challengeCategory: challenge.category,\n        ctfName: this.ctf.name,\n        url: url,\n        ctfID: this.ctf.id,\n        submitterID: this.me.id,\n      } as Writeup)\n      .subscribe((writeup) => {\n        this.writeups.push(writeup);\n      });\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}